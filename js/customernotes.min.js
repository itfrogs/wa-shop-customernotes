(function(a){a.Customernotes={localization:null,waAppUrl:null,waUrl:null,contact_id:null,confirm_message:null,init:function(){jQuery.ajaxSetup({cache:false});a(".s-toggle-status").iButton({labelOn:"",labelOff:"",className:"mini"}).change(function(){var b=a(this);var c=b.is(":checked");if(c){c=1;a("#customernotesContent").show(200)}else{c=0;a("#customernotesContent").hide(200)}a.post("?plugin=customernotes&action=shownotes",{enabled:c},function(e){if(e.status=="ok"){}},"json")})},rateObject:{rate:function(d){var f=a(d);var b=f.hasClass("rateUp")?"up":"down";var c=f.attr("data-order_id");a.post("?plugin=customernotes&action=rate",{type:b,order_id:c},function(e){if(e.status=="ok"){a("#customernotes-form").html(e.data.form_template);a("#customernotes-notes").html(e.data.notes_template);a("#customernotes-rating").html(e.data.rating_template);f.addClass("active")}},"json")}},deleteNote:function(c){if(confirm(this.confirm_message)){var b=a(c).closest("li");var d=b.find("a").data("order_id");a.post("?plugin=customernotes&action=deletenote",{order_id:d},function(e){if(e.status=="ok"){a("#customernotes-form").html(e.data.form_template);a("#customernotes-rating").html(e.data.rating_template);b.remove()}},"json")}},apiSendNote:function(b){a("#customernotes-update-comment-"+b).removeClass("update").addClass("loading");a.post("?plugin=customernotes&action=sendcomment",{order_id:b},function(c){if(c.status=="ok"){a("#customernotes-update-comment-"+b).removeClass("loading").addClass("update")}},"json")},contactcheck:function(){if(a.Customernotes.contact_id){a.post("?plugin=customernotes&action=contactcheck",{contact_id:a.Customernotes.contact_id},function(b){if(b.status=="ok"){a("#customernotes-bstats-customer").html(b.data.customer)}},"json")}},choose:function(b,c){a.post("?plugin=customernotes&action=choose",{contact_id:b,customer:c},function(e){if(e.status=="ok"){a("#customernotes-bstats-customer").html(e.data.customer)}},"json")},addNote:function(c){var b=a("#customernotesAddNote").serialize();a.post("?plugin=customernotes&action=addnote",b,function(e){if(e.status=="ok"){a("#customernotes-notes").html(e.data.notes_template);a(saveButton).addClass("green")}},"json")}}})(jQuery);